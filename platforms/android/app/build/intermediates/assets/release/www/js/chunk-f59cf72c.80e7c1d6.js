(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f59cf72c"],{"17e2":function(e,t,n){"use strict";var s=n("2df0"),i=n.n(s);i.a},"1bb2":function(e,t,n){},"2df0":function(e,t,n){},3598:function(e,t,n){},"386b":function(e,t,n){var s=n("5ca1"),i=n("79e5"),o=n("be13"),a=/"/g,c=function(e,t,n,s){var i=String(o(e)),c="<"+t;return""!==n&&(c+=" "+n+'="'+String(s).replace(a,"&quot;")+'"'),c+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(c),s(s.P+s.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},"38b5":function(e,t,n){e.exports=n.p+"img/男学生.478830f1.png"},"3c53":function(e,t,n){"use strict";var s=n("1bb2"),i=n.n(s);i.a},"3ff4":function(e,t,n){e.exports=n.p+"img/女学生.d56f6378.png"},4726:function(e,t,n){},4887:function(e,t,n){},"525c":function(e,t,n){},"5a5c":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"topic_warp"},["FINISH"==e.objective.questionStatus?n("div",{staticClass:"Collection",on:{click:e.Collection}},[n("img",{attrs:{src:e.Collectionsrc,alt:""}})]):e._e(),n("div",{staticClass:"title"},[e._v(e._s(e.objective.title)+" "),e.objective.questionTypeInCN?n("span",[e._v("("+e._s(e.objective.questionTypeInCN)+")")]):e._e()]),n("div",{staticClass:"topic",domProps:{innerHTML:e._s(e.objective.questionContent)}},[e._v("\n        "+e._s(e.objective.questionContent)+"\n    ")]),e._l(e.objective.options,function(t,s){return 1==e.objective.answer.length?n("div",{key:s,staticClass:"select clearfix",on:{click:function(t){e.selectIndex(s,e.objective.questionId)}}},[n("div",{staticClass:"round"},[e.pointIndex===s?n("span",{staticClass:"point"}):e._e()]),n("div",{staticClass:"option"},[e._v(e._s(e.conversion(s))+".")]),n("div",{staticClass:"text",domProps:{innerHTML:e._s(t)}},[e._v(e._s(t))])]):e._e()}),e._l(e.objective.options,function(t,s){return e.objective.answer.length>1?n("div",{key:s,staticClass:"select clearfix",on:{click:function(t){e.selectsIndex(s,e.objective.questionId)}}},[n("div",{staticClass:"round complex"},[e.answers.indexOf(s)>-1?n("span",{staticClass:"point"}):e._e()]),n("div",{staticClass:"option"},[e._v(e._s(e.conversion(s))+".")]),n("div",{staticClass:"text",domProps:{innerHTML:e._s(t)}},[e._v(e._s(t))])]):e._e()}),n("PopupPic",{attrs:{questionPic:e.objective.questionPic}}),"FINISH"==e.objective.questionStatus?n("div",{staticClass:"anwers"},[e._v("\n      此题答案为:"),n("span",{domProps:{innerHTML:e._s(e.objective.answer.split("|").join(","))}})]):e._e(),"FINISH"==e.objective.questionStatus?n("div",{staticClass:"remind",domProps:{innerHTML:e._s(e.objective.parse)}}):e._e()],2)},i=[],o=(n("55dd"),n("28a5"),n("5fc6"),n("5af2")),a=n.n(o),c=(n("cadf"),n("551c"),n("097d"),n("399a")),r=n("a07d"),u={name:"classObjective",components:{PopupPic:r["a"]},props:{objective:{type:Object,default:function(){return{}}}},data:function(){return{pointIndex:-1,answers:"",Collectionsrc:n("f2f6"),Collectiontype:!1}},mounted:function(){this.objective.favor&&(this.Collectiontype=!0,this.Collectionsrc=n("6921"))},methods:{Collection:function(){var e=this;this.Collectiontype?Object(c["l"])(this.objective.questionId).then(function(t){"0010"===t.data.code?(e.Collectiontype=!1,e.Collectionsrc=n("f2f6")):a()({message:t.data.msg,position:"middle",duration:1e3})}):Object(c["a"])(this.objective.questionId).then(function(t){"0010"===t.data.code?(e.Collectiontype=!0,e.Collectionsrc=n("6921")):a()({message:t.data.msg,position:"middle",duration:1e3})})},selectsIndex:function(e,t){var n="";if(this.answers.indexOf(e)>-1){var s=this.answers.split(e);this.answers=s[0]+s[1]}else this.answers=this.answers+e;for(var i=0;i<this.answers.length;i++){var o=parseInt(this.answers[i])+65,a=String.fromCharCode(o);n+=a}n=n.split("").sort().join(""),1==n.length?n+="|":n=n.split("").join("|"),console.log(n),this.$emit("Multipleanswers",t,n)},selectIndex:function(e,t){this.pointIndex=e;var n=65+e,s=String.fromCharCode(n);this.$emit("selectAnswer",t,s)},conversion:function(e){var t=65+e;return String.fromCharCode(t)}}},l=u,d=(n("3c53"),n("2877")),v=Object(d["a"])(l,s,i,!1,null,"0fcca3b8",null);v.options.__file="classObjective.vue";t["a"]=v.exports},"673e":function(e,t,n){"use strict";n("386b")("sub",function(e){return function(){return e(this,"sub","","")}})},"787a":function(e,t,n){"use strict";var s=n("98b3"),i=n.n(s);i.a},"98b3":function(e,t,n){},"9a65":function(e,t,n){"use strict";var s=n("4887"),i=n.n(s);i.a},c2d9:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"subjective",attrs:{id:"qc"+e.subjectiveTopic.questionId}},["FINISH"==e.subjectiveTopic.questionStatus?n("div",{staticClass:"Collection",on:{click:e.Collection}},[n("img",{attrs:{src:e.Collectionsrc,alt:""}})]):e._e(),n("div",{staticClass:"topic_warp"},[n("div",{staticClass:"title"},[e._v(e._s(e.subjectiveTopic.title)+" "),e.subjectiveTopic.questionTypeInCN?n("span",[e._v("("+e._s(e.subjectiveTopic.questionTypeInCN)+")")]):e._e()]),n("div",{staticClass:"topic",attrs:{id:"tp"+e.subjectiveTopic.questionId},domProps:{innerHTML:e._s(e.subjectiveTopic.questionContent)}},[e._v("\n            "+e._s(e.subjectiveTopic.questionContent)+"\n        ")])]),n("PopupPic",{attrs:{questionPic:e.subjectiveTopic.questionPic}}),"FINISH"==e.subjectiveTopic.questionStatus?n("div",{staticClass:"anwers"},[e._v("\n      此题答案为:"),n("span",{domProps:{innerHTML:e._s(e.subjectiveTopic.answer)}})]):e._e(),"FINISH"==e.subjectiveTopic.questionStatus?n("div",{staticClass:"remind",domProps:{innerHTML:e._s(e.subjectiveTopic.parse)}}):e._e()],1)},i=[],o=(n("5fc6"),n("5af2")),a=n.n(o),c=(n("cadf"),n("551c"),n("097d"),n("399a")),r=n("a07d"),u={name:"subjective",components:{PopupPic:r["a"]},props:{subjectiveTopic:{type:Object,default:function(){return{}}}},data:function(){return{Collectionsrc:n("f2f6"),Collectiontype:!1}},mounted:function(){this.subjectiveTopic.favor&&(this.Collectiontype=!0,this.Collectionsrc=n("6921"))},methods:{Collection:function(){var e=this;this.Collectiontype?Object(c["l"])(this.subjectiveTopic.questionId).then(function(t){"0010"===t.data.code?(e.Collectiontype=!1,e.Collectionsrc=n("f2f6")):a()({message:t.data.msg,position:"middle",duration:1e3})}):Object(c["a"])(this.subjectiveTopic.questionId).then(function(t){"0010"===t.data.code?(e.Collectiontype=!0,e.Collectionsrc=n("6921")):a()({message:t.data.msg,position:"middle",duration:1e3})})}}},l=u,d=(n("9a65"),n("2877")),v=Object(d["a"])(l,s,i,!1,null,"5e12d0b8",null);v.options.__file="subjective.vue";t["a"]=v.exports},cfb3:function(e,t,n){"use strict";var s=n("525c"),i=n.n(s);i.a},dee7:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"classroom"},[s("public-header",{attrs:{header:e.header}}),e.pageShow?s("scroll-content",{ref:"myscrollfull",attrs:{mescrollValue:e.mescrollValue}},[s("div",{staticClass:"time"},[e._v(e._s(e.hours)+":"+e._s(e.minutes))]),e.preview||e.attachments.length>0||e.attachmentsstatus?s("preview-points",{attrs:{preview:e.preview,attachmentsfile:e.attachments,attachmentsstatus:e.attachmentsstatus}}):e._e(),e._l(e.showTopicList,function(t,n){return s("div",{key:n,staticClass:"class_topic_warp"},["objective"===t.quesetionType?s("div",{staticClass:"objective_warp"},[s("class-objective",{attrs:{objective:t},on:{selectAnswer:e.selectAnswer,Multipleanswers:e.Multipleanswers}}),"FINISH"!==t.questionStatus?s("div",{staticClass:"submit_warp"},[s("div",{staticClass:"objective_submit",on:{click:function(n){e.objective_submit(t.questionId)}}})]):e._e(),s("reply",{attrs:{reply:e.reply,type:t.type,id:t.questionId}}),"FINISH"===t.questionStatus?s("div",{staticClass:"closeReply"},[s("span",{staticClass:"text"},[e._v("老师已终止"+e._s(t.title)+"的作答")])]):e._e()],1):e._e(),"subjective"===t.quesetionType?s("div",{staticClass:"subjective_warp"},[s("subjective",{attrs:{subjectiveTopic:t}}),"FINISH"!==t.questionStatus&&e.objectiveAnswer[n].show?s("div",{staticClass:"button_warp"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.objectiveAnswer[n].answer,expression:"!objectiveAnswer[index].answer"}],staticClass:"subjective_submit Answerstart",on:{click:function(n){e.answerQuestions(t.questionId,t.questionContent,t.questionPic)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.objectiveAnswer[n].answer,expression:"objectiveAnswer[index].answer"}],staticClass:"subjective_submit Answermodify",on:{click:function(n){e.modifyAnswer(t.questionId,t.questionContent,t.questionPic)}}})]):e._e(),s("board",{directives:[{name:"show",rawName:"v-show",value:e.isAnswer(e.objectiveAnswer[n].answer),expression:"isAnswer(objectiveAnswer[index].answer)"}],attrs:{subjectiveAnswer:e.objectiveAnswer,id:t.questionId}}),"FINISH"===t.questionStatus?s("div",{staticClass:"closeReply"},[s("span",{staticClass:"text"},[e._v("老师已终止"+e._s(t.title)+"的作答")])]):e._e()],1):e._e()])}),s("div",{class:{awbtn:e.btn===e.current},attrs:{id:"btn"},on:{click:e.Answerbtn}},[s("img",{attrs:{src:n("efde"),alt:""}})])],2):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.AnswerShareshow,expression:"AnswerShareshow"}],staticClass:"AnswerShare"},[s("span",{staticClass:"btnout",on:{click:e.btnout}},[e._v("x")]),e._l(e.AnswerShareList,function(t,n){return s("div",{key:n,staticClass:"AnswerShareList"},[s("div",{staticClass:"question",attrs:{id:t.id},domProps:{innerHTML:e._s(t.title)}},[e._v(e._s(t.title))]),s("div",{staticClass:"answerimg"},[s("img",{attrs:{src:t.img,alt:""}})])])})],2),e.loading?s("loading"):e._e(),e.qdshow?s("div",{staticClass:"Responderbox"},[s("div",{staticClass:"qdbox"},[s("div",{staticClass:"none",on:{click:function(t){e.qdshow=!1}}},[e._v("x")]),s("div",{staticClass:"text"},[e._v("是否抢答")]),s("div",{staticClass:"cancel",on:{click:function(t){e.qdshow=!1}}},[e._v("取消")]),s("div",{staticClass:"confirm",on:{click:e.qdconfirm}},[e._v("确认")])])]):e._e()],1)},i=[],o=(n("20d6"),n("96cf"),n("1da1")),a=(n("ceaa"),n("b2fb")),c=n.n(a),r=(n("a481"),n("be94")),u=(n("5fc6"),n("5af2")),l=n.n(u),d=(n("ac6a"),n("cadf"),n("551c"),n("097d"),n("5a5c")),v=n("d67f"),p=n("15d6"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"topic_content"},[n("div",{staticClass:"title"},[e._v(e._s(e.title))]),n("div",{staticClass:"item"},[e._v("\n        "+e._s(e.preview)+"\n    ")]),e._l(e.attachmentsfile,function(t,s){return"1"==t.publishFlag||t.sub==e.attachmentsstatus?n("div",{key:s,staticClass:"row"},[e._v("附件  \n      "),n("a",{on:{"!click":function(n){e.downloadAttachment4App(t)}}},[e._v(e._s(t.name))])]):e._e()})],2)},f=[],w=(n("6b54"),n("673e"),n("7f7f"),n("3598"),n("711b")),b={name:"previewPoints",props:{preview:{type:String,default:function(){return[]}},attachmentsfile:{type:Array,default:function(){return{}}},attachmentsstatus:{type:String,default:function(){return{}}}},data:function(){return{title:"预习要点",ready:!1}},mounted:function(){this.preview?this.title="预习要点":this.title="",console.log(this.attachmentsfile),this.initialize()},methods:{initialize:function(){var e=this;document.addEventListener("deviceready",e.onDeviceReady.bind(this),!1)},onDeviceReady:function(){this.ready=!0},downloadAttachment4App:function(e){var t=this;t.ready?(c.a.open({text:"加载中...",spinnerType:"fading-circle"}),window.resolveLocalFileSystemURL(cordova.file.externalDataDirectory,function(n){console.log("file system open: "+n.nativeURL),t.createFile(n,e)},function(e){l()("进入文件系统失败！")})):l()("设备没响应，请稍后重试")},createFile:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:s=this,t.getFile(n.name,{create:!0,exclusive:!0},function(e){s.requestAttachment(e,n)},function(e){c.a.close(),console.log(e),t.getFile(n.name,{create:!1},function(e){s.previewfile(e,n)},function(e){l()("读取文件失败")})});case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),requestAttachment:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(w["c"])(n.sub);case 3:if(s=e.sent,c.a.close(),s&&s.data){e.next=8;break}throw l()("下载失败，请稍后重试"),new Error("返回值为空:"+s+","+s.data);case 8:i=new Blob([s.data]),this.writeFile(t,i,n),e.next=18;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0),c.a.close(),l()({message:"下载失败，请稍后重试！",duration:1e3}),t.remove(function(){console.log("删除成功")},function(e){console.log("删除错误："+e)});case 18:case"end":return e.stop()}},e,this,[[0,12]])}));return function(t,n){return e.apply(this,arguments)}}(),writeFile:function(e,t,n){var s=this;e.createWriter(function(i){if(i.onwriteend=function(){console.log("Successful file write..."),s.previewfile(e,n)},i.onerror=function(e){console.log("Failed file write: "+e.toString())},!t)throw new Error("返回值为空:"+t);i.write(t)})},previewfile:function(e,t){console.log("file name:"+e.name+",file path:"+e.toInternalURL()),cordova.plugins.fileOpener2.showOpenWithDialog(e.toInternalURL(),t.contentType,function(e){console.log("成功预览:"+e)},function(e){l()("出错！请在"+cordova.file.externalDataDirectory+"目录下查看")})},downloadAttachment4Web:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,s,i,o,a,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(w["c"])(t.sub);case 2:n=e.sent,console.log(n),s=new Blob([n.data]),i=window.URL||window.webkitURL,o=i.createObjectURL(s),a=document.createElement("a"),"download"in a?(a.style.visibility="hidden",a.href=o,a.download=t.name,document.body.appendChild(a),c=document.createEvent("MouseEvents"),c.initEvent("click",!0,!0),a.dispatchEvent(c),document.body.removeChild(a)):navigator.msSaveBlob?navigator.msSaveBlob(s,name):location.href=o;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}},m=b,g=(n("17e2"),n("2877")),j=Object(g["a"])(m,h,f,!1,null,null,null);j.options.__file="previewPoints.vue";var C=j.exports,_=n("c2d9"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"classroomOneReply"},e._l(e.select,function(t,s){return t?n("div",{key:s,staticClass:"reply_objective"},[n("div",{staticClass:"bubble"},[n("div",{staticClass:"answer"},[e._v(e._s(t))])]),n("public-avatar")],1):e._e()}))},I=[],A=(n("28a5"),n("c5f6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"avatar_warp"},[n("img",{attrs:{src:e.userimg,alt:"头像"}})])}),q=[],S={name:"avatar",data:function(){return{userimg:""}},mounted:function(){this.getstudent()},methods:{getstudent:function(){var e=JSON.parse(localStorage.getItem("user"));"FEMALE"==e.userSex?this.userimg=n("3ff4"):this.userimg=n("38b5")}}},x=S,T=(n("f70f"),Object(g["a"])(x,A,q,!1,null,null,null));T.options.__file="avatar.vue";var k=T.exports,O={name:"Reply",props:{id:{type:[String,Number],default:""},type:{type:String,default:""},reply:{type:Array,default:function(){return[]}}},components:{PublicAvatar:k},data:function(){return{select:[],arr:[],show:!1}},watch:{reply:{handler:function(){for(var e="",t=0;t<this.reply.length;t++){for(var n=0;n<this.reply[t].answer.length;n++)e=this.reply[t].answer[n].split("|").join(","),this.reply[t].answer[n]=e;this.reply[t].id===this.id&&(this.select=this.reply[t].answer)}},immediate:!0,deep:!0}}},L=O,H=(n("cfb3"),Object(g["a"])(L,y,I,!1,null,"7d3ca7f6",null));H.options.__file="Reply.vue";var F=H.exports,E=n("b5a9"),P=n("8c36"),R=n("399a"),B=n("2f62"),N=n("4360"),U=n("cc7d"),M=n.n(U),D=n("74d1"),$=n.n(D),J=n("951f"),Q=n.n(J),V={components:{PublicHeader:v["a"],ScrollContent:p["a"],PreviewPoints:C,Subjective:_["a"],Reply:F,Board:E["a"],Loading:P["a"],ClassObjective:d["a"]},data:function(){return{qdshow:!1,attachmentsstatus:"",attachments:[],objectiveAnswerbtn:!1,AnswerShareList:[],AnswerShareshow:!1,btn:1,current:0,objectiveCount:0,subjectiveCount:0,course:"",progress:0,subjectiveId:"",topicList:[],topicListId:[],showTopicList:[],mescrollValue:{up:!1,down:!1},loading:!0,pageShow:!1,header:{title:"",url:"/studentIndex"},preview:"",objectiveAnswer:[],reply:[],hours:0,minutes:0,wsUrl:this.apiHost(),stompClient:null,subscription:null,token:localStorage.getItem("token")}},watch:{boardImg:function(e){var t=this,n=this;n.objectiveAnswer.forEach(function(s,i){s.id===n.subjectiveId&&(s.answer=e.data,t.$set(n.objectiveAnswer,i,s))}),Object(R["n"])(e.data).then(function(e){l()({message:"图片存储成功！",position:"middle",duration:1e3}),Object(R["o"])(t.course,t.subjectiveId,123,"test",e.data.data.stubForSubjective).then(function(e){console.log(e),l()({message:"答案提交成功！",position:"middle",duration:1e3})}).catch(function(e){l()({message:"答案提交失败！",position:"middle",duration:1e3}),console.log(e)})}).catch(function(e){l()({message:"图片存储失败！",position:"middle",duration:1e3}),console.log(e)})}},mounted:function(){this.getCourseId(),this.getClassrooms();var e=new Date;this.hours=e.getHours(),this.minutes=e.getMinutes(),this.minutes<10&&(this.minutes="0"+this.minutes),this.time(),this.connect(),this.connectfile()},computed:Object(r["a"])({},Object(B["b"])(["isBoard","isBlueTooth","boardImg"])),methods:{qdconfirm:function(){var e=this,t=(new Date).getTime();Object(R["k"])(this.course,t).then(function(t){console.log(t),e.qdshow=!1})},Answerbtn:function(){this.AnswerShareshow=!0},btnout:function(){this.btn=1,this.AnswerShareshow=!1},isAnswer:function(e){return!!e},answerQuestions:function(e,t,n){if(!this.objectiveAnswerbtn){this.objectiveAnswerbtn=!0;var s=this;document.getElementById("tp"+e).setAttribute("style","letter-spacing: 4px !important;padding-top: 8px !important"),Q()(document.getElementById("tp"+e),{useCORS:!0,logging:!1,ignoreElements:function(e){var t=e.type;return!(!t||"text"!==t)&&(console.log(e),!0)}}).then(function(t){var i=t.toDataURL("image/png").replace("data:image/png;base64,","");document.getElementById("tp"+e).setAttribute("style",'letter-spacing:"";padding-top: ""'),s.subjectiveId=e,window.HandwrittenBoard.isConnect(function(e){console.log(e)},function(e){switch(console.log(e),e.data.status){case 0:localStorage.getItem("bluetooth")||N["a"].commit("SET_BLUETOOTH",!0),window.HandwrittenBoard.exploration(),console.log("第一个"),s.objectiveAnswerbtn=!1;break;case 2:var t={content:i,pic:n,base64img:""};window.HandwrittenBoard.getBase64img(t),console.log("第二个"),s.objectiveAnswerbtn=!1;break;default:break}})})}},addTopic:function(e){var t=this;t.topicList.forEach(function(n){if(n.questionId===e){var s=JSON.parse(JSON.stringify(n));switch(n.quesetionType){case"objective":t.objectiveCount++,s.title="客观题-"+t.objectiveCount;break;case"subjective":t.subjectiveCount++,s.title="主观题-"+t.subjectiveCount;break;default:return}t.showTopicList.push(s),t.objectiveAnswer.push({id:n.questionId,answer:"",show:!1})}})},modifyAnswer:function(e,t,n){var s=this;if(!this.objectiveAnswerbtn){this.objectiveAnswerbtn=!0;var i=this;document.getElementById("tp"+e).setAttribute("style","letter-spacing: 4px !important;padding-top: 8px !important"),Q()(document.getElementById("tp"+e),{useCORS:!0,logging:!1,ignoreElements:function(e){var t=e.type;return!(!t||"text"!==t)&&(console.log(e),!0)}}).then(function(t){var o=t.toDataURL("image/png").replace("data:image/png;base64,","");document.getElementById("tp"+e).setAttribute("style",'letter-spacing:"";padding-top: ""'),i.subjectiveId=e;for(var a="",c=0;c<s.objectiveAnswer.length;c++)e===s.objectiveAnswer[c].id&&(a=s.objectiveAnswer[c].answer);window.HandwrittenBoard.isConnect(function(e){console.log(e)},function(e){switch(console.log(e),e.data.status){case 0:localStorage.getItem("bluetooth")||N["a"].commit("SET_BLUETOOTH",!0),window.HandwrittenBoard.exploration(),console.log("第一个"),i.objectiveAnswerbtn=!1;break;case 2:var t={content:o,pic:n,base64img:a};window.HandwrittenBoard.getBase64img(t),console.log("第二个"),i.objectiveAnswerbtn=!1;break;default:break}})})}},selectAnswer:function(e,t){for(var n=0;n<this.objectiveAnswer.length;n++)this.objectiveAnswer[n].id===e&&(this.objectiveAnswer[n].answer=t)},Multipleanswers:function(e,t){for(var n=0;n<this.objectiveAnswer.length;n++)this.objectiveAnswer[n].id===e&&(this.objectiveAnswer[n].answer=t,console.log(this.objectiveAnswer[n].answer))},objective_submit:function(e){for(var t=0;t<this.objectiveAnswer.length;t++)if(this.objectiveAnswer[t].id===e){if(!this.objectiveAnswer[t].answer)return!1;if(0===this.reply.length)return this.reply.push({id:e,answer:[this.objectiveAnswer[t].answer]}),this.sendObjective(e,this.objectiveAnswer[t].answer),!1;for(var n=!1,s=0;s<this.reply.length;s++)if(this.reply[s].id===e)return this.reply[s].answer[this.reply[s].answer.length-1]!==this.objectiveAnswer[t].answer&&(this.reply[s].answer.push(this.objectiveAnswer[t].answer),this.sendObjective(e,this.objectiveAnswer[t].answer),n=!0,!1);if(!1===n)return console.log(this.objectiveAnswer[t].answer),this.reply.push({id:e,answer:[this.objectiveAnswer[t].answer]}),this.sendObjective(e,this.objectiveAnswer[t].answer),!1}},sendObjective:function(e,t){var n=this;Object(R["m"])(this.course,e,123,"test",t).then(function(e){l()({message:"答案提交成功！",position:"middle",duration:1e3}),console.log(n.reply)}).catch(function(e){l()({message:"答案提交失败！",position:"middle",duration:1e3}),console.log(e)})},questions:function(){if(this.isBoard){c.a.open({text:"正在获取手写板内容...",spinnerType:"fading-circle"});var e=this;setTimeout(function(){window.HandwrittenBoard.take(function(t){console.log(t),e.img=t.data.image,c.a.close(),l()("获取手写板内容成功!"),window.HandwrittenBoard.cleanup(function(){})})},300)}else window.HandwrittenBoard.exploration()},getClassrooms:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n,s,i,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,Object(R["c"])(t.course);case 3:for(n=e.sent,console.log(n),t.topicList=n.data.data.questions,t.preview=n.data.data.courseInfo,t.attachments=n.data.data.attachments,t.pageShow=!0,t.loading=!1,s=0;s<t.topicList.length;s++)i=t.topicList[s],"NOTSTART"!=i.questionStatus&&t.addTopic(i.questionId);o=regeneratorRuntime.mark(function e(n){var s,i,o,a,c,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.topicList[n],!s.answerForStudent){e.next=14;break}if("objective"!==s.quesetionType){e.next=6;break}t.reply.push({id:s.questionId,answer:[s.answerForStudent.answerForObjective]}),e.next=12;break;case 6:if(!s.answerForStudent&&!s.answerForTeacher){e.next=12;break}return e.next=9,Object(R["g"])(s.answerForTeacher?s.answerForTeacher.stubForSubjective:s.answerForStudent.stubForSubjective);case 9:i=e.sent,o=t.objectiveAnswer.findIndex(function(e){return e.id===s.questionId}),-1!=o&&(a=t.objectiveAnswer[o],i.data.data&&(a.answer=i.data.data.content,a.show=!0,t.$set(t.objectiveAnswer,o,a)));case 12:e.next=16;break;case 14:c=t.objectiveAnswer.findIndex(function(e){return e.id===s.questionId}),-1!=c&&(r=t.objectiveAnswer[c],r.show=!0,t.$set(t.objectiveAnswer,c,r));case 16:case"end":return e.stop()}},e,this)}),a=0;case 13:if(!(a<t.topicList.length)){e.next=18;break}return e.delegateYield(o(a),"t0",15);case 15:a++,e.next=13;break;case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),time:function(){var e=this;setInterval(function(){var t=new Date;e.hours=t.getHours(),e.minutes=t.getMinutes(),e.minutes<10&&(e.minutes="0"+e.minutes)},1e3)},getCourseId:function(){this.course=this.$route.query.courseId,this.header.title=this.$route.query.courseName},connect:function(){var e=new M.a(this.wsUrl+"/websocket/course");this.stompClient=$.a.over(e),this.stompClient.heartbeat.outgoing=4e5,this.stompClient.heartbeat.incoming=0;var t={login:"mylogin",passcode:"mypasscode",userId:"curUserId",accessToken:this.token},n=this;this.stompClient.connect(t,function(e){console.log("Connected:"+e);var t={userId:"curUserId",accessToken:n.token};n.subscription=n.stompClient.subscribe("/topic/course/student/"+n.course,function(e){n.classData(e)},t)})},classData:function(e){var t=this,n=JSON.parse(e.body),s=this;n.data&&("QuestionForPublish"===n.data.wsType&&this.addTopic(n.data.questionId),"QuestionClose"===n.data.wsType&&s.showTopicList.forEach(function(e,t){e.questionId&&e.questionId===n.data.questionId&&(e.questionStatus="FINISH",s.$set(s.showTopicList,t,e))}),"AnswerShare"===n.data.wsType&&function(){var e=t;e.btn=0;for(var s=function(t){var s=e.topicList[t];s.questionId===n.data.questionId&&Object(R["g"])(n.data.picPath).then(function(t){if(console.log(t),t.data.data){var n="data:image/png;base64,"+t.data.data.content.replace(",","");e.AnswerShareList=[{id:s.questionId,title:s.questionContent,img:n}]}})},i=0;i<e.topicList.length;i++)s(i)}(),"RACE"===n.data.wsType&&(s.qdshow=!0))},connectfile:function(){var e=new M.a(this.wsUrl+"/websocket/course"),t=$.a.over(e);t.heartbeat.outgoing=4e5,t.heartbeat.incoming=0;var n=this;t.connect({login:"mylogin",passcode:"mypasscode",userId:"curUserId",accessToken:n.token},function(e){console.log("连接成功");var s={userId:"curUserId",accessToken:n.token};t.subscribe("/topic/publish/student/"+n.course,function(e){console.log(e);var t=JSON.parse(e.body).data;t&&(l()("老师已共享附件"),n.attachmentsstatus=t)},s)},function(e){console.log("连接失败")})}},beforeDestroy:function(){this.timer&&clearInterval(this.timer),this.stompClient.unsubscribe("/topic/course/student/"+this.course)}},W=V,z=(n("787a"),Object(g["a"])(W,s,i,!1,null,"6757a90e",null));z.options.__file="show.vue";t["default"]=z.exports},efde:function(e,t,n){e.exports=n.p+"img/答案.42fadfb2.png"},f70f:function(e,t,n){"use strict";var s=n("4726"),i=n.n(s);i.a}}]);